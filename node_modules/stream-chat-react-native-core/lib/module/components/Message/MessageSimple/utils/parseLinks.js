var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.parseLinksFromText = void 0;
var _linkifyIt = _interopRequireDefault(require("linkify-it"));
var removeMarkdownLinksFromText = function removeMarkdownLinksFromText(input) {
  return input.replace(/\[[\w\s]+\]\(.*\)/g, '');
};
var removeUserNamesFromText = function removeUserNamesFromText(input) {
  return input.replace(/^@\w+\.?\w/, '');
};
var parseLinksFromText = function parseLinksFromText(input) {
  var _linkify$match;
  var strippedInput = [removeMarkdownLinksFromText, removeUserNamesFromText].reduce(function (acc, fn) {
    return fn(acc);
  }, input);
  var linkify = (0, _linkifyIt["default"])();
  var matches = (_linkify$match = linkify.match(strippedInput)) != null ? _linkify$match : [];
  var result = matches.map(function (match) {
    var raw = match.raw,
      url = match.url;
    return {
      encodedUrl: encodeURI(url),
      raw: raw
    };
  });
  return result;
};
exports.parseLinksFromText = parseLinksFromText;
//# sourceMappingURL=parseLinks.js.map