{"version":3,"names":["_linkifyIt","_interopRequireDefault","require","removeMarkdownLinksFromText","input","replace","removeUserNamesFromText","parseLinksFromText","_linkify$match","strippedInput","reduce","acc","fn","linkify","Linkify","matches","match","result","map","raw","url","encodedUrl","encodeURI","exports"],"sources":["parseLinks.ts"],"sourcesContent":["import Linkify from 'linkify-it';\n\ninterface LinkInfo {\n  encodedUrl: string;\n  raw: string;\n}\n\n/**\n * This is done separately because of the version of javascript run\n * for expo\n * */\nconst removeMarkdownLinksFromText = (input: string) => input.replace(/\\[[\\w\\s]+\\]\\(.*\\)/g, '');\n\n/**\n * Hermes doesn't support lookbehind, so this is done separately to avoid\n * parsing user names as links.\n * */\nconst removeUserNamesFromText = (input: string) => input.replace(/^@\\w+\\.?\\w/, '');\n\nexport const parseLinksFromText = (input: string): LinkInfo[] => {\n  const strippedInput = [removeMarkdownLinksFromText, removeUserNamesFromText].reduce(\n    (acc, fn) => fn(acc),\n    input,\n  );\n\n  const linkify = Linkify();\n  const matches = linkify.match(strippedInput) ?? [];\n\n  const result: LinkInfo[] = matches.map((match) => {\n    const { raw, url } = match;\n    return { encodedUrl: encodeURI(url), raw };\n  });\n\n  return result;\n};\n"],"mappings":";;;;;AAAA,IAAAA,UAAA,GAAAC,sBAAA,CAAAC,OAAA;AAWA,IAAMC,2BAA2B,GAAG,SAA9BA,2BAA2BA,CAAIC,KAAa;EAAA,OAAKA,KAAK,CAACC,OAAO,CAAC,oBAAoB,EAAE,EAAE,CAAC;AAAA;AAM9F,IAAMC,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAAIF,KAAa;EAAA,OAAKA,KAAK,CAACC,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC;AAAA;AAE3E,IAAME,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAIH,KAAa,EAAiB;EAAA,IAAAI,cAAA;EAC/D,IAAMC,aAAa,GAAG,CAACN,2BAA2B,EAAEG,uBAAuB,CAAC,CAACI,MAAM,CACjF,UAACC,GAAG,EAAEC,EAAE;IAAA,OAAKA,EAAE,CAACD,GAAG,CAAC;EAAA,GACpBP,KACF,CAAC;EAED,IAAMS,OAAO,GAAG,IAAAC,qBAAO,EAAC,CAAC;EACzB,IAAMC,OAAO,IAAAP,cAAA,GAAGK,OAAO,CAACG,KAAK,CAACP,aAAa,CAAC,YAAAD,cAAA,GAAI,EAAE;EAElD,IAAMS,MAAkB,GAAGF,OAAO,CAACG,GAAG,CAAC,UAACF,KAAK,EAAK;IAChD,IAAQG,GAAG,GAAUH,KAAK,CAAlBG,GAAG;MAAEC,GAAG,GAAKJ,KAAK,CAAbI,GAAG;IAChB,OAAO;MAAEC,UAAU,EAAEC,SAAS,CAACF,GAAG,CAAC;MAAED,GAAG,EAAHA;IAAI,CAAC;EAC5C,CAAC,CAAC;EAEF,OAAOF,MAAM;AACf,CAAC;AAACM,OAAA,CAAAhB,kBAAA,GAAAA,kBAAA"}